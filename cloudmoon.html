<!DOCTYPE html>
<html>
<head>
    <title>Blob Link Generator</title>
</head>
<body>

    <h2>Cloudmoon Blob Opener</h2>
    
    <!-- A button is needed to prevent the browser from blocking the popup -->
    <button id="blobBtn">Open Site as Blob</button>

    <script>
        async function createBlobLink(url) {
            try {
                console.log("Fetching...");
                
                // 1. Fetch the content
                const response = await fetch(url);
                const blob = await response.blob();

                // 2. Create the temporary blob URL
                const blobUrl = URL.createObjectURL(blob);

                // 3. Open it in a new tab
                console.log("Success! Blob URL:", blobUrl);
                window.open(blobUrl, '_blank');
            } catch (error) {
                alert("CORS Error: The site blocked the request. This usually happens with external domains.");
                console.error("Fetch error:", error);
            }
        }

        // Trigger the function when the button is clicked
        document.getElementById('blobBtn').addEventListener('click', () => {
            createBlobLink('https://cloudmoonapp.pages.dev');
        });
    </script>

</body>
</html>
